<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>tonkotsu.online</title>

  <style>
    /* =========================================================
       GLOBAL THEME: compact, black, high polish
       Custom cursor applies immediately (no “later” load)
       ========================================================= */
    :root{
      --bg:#050607;
      --bg2:#090a0c;
      --panel:rgba(255,255,255,.035);
      --panel2:rgba(255,255,255,.025);
      --stroke:rgba(255,255,255,.085);
      --stroke2:rgba(255,255,255,.12);
      --text:#eaf0f7;
      --muted:#98a6b6;
      --shadow:0 22px 80px rgba(0,0,0,.62);
      --shadow2:0 14px 50px rgba(0,0,0,.55);

      --online:#43d18b;
      --idle:#ffd166;
      --dnd:#ff5252;
      --offline:#6b7a90;

      --danger:#ff4b4b;
      --ok:#43d18b;

      --r:16px;
      --r2:18px;

      --h:36px;
      --gap:10px;

      --ease: cubic-bezier(.2,.85,.2,1);
      --fast: 120ms var(--ease);
      --med: 200ms var(--ease);
      --slow: 420ms var(--ease);
      --super: 760ms var(--ease);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background: linear-gradient(180deg, var(--bg), var(--bg2));
      color:var(--text);
      font: 520 12.5px/1.35 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      overflow:hidden;

      /* CUSTOM CURSOR (applies instantly) */
      cursor: none;
    }

    /* Cursor visuals */
    #cursor, #cursor2{
      position:fixed;
      top:0; left:0;
      width:12px; height:12px;
      border-radius:999px;
      pointer-events:none;
      z-index:9999;
      transform: translate(-50%,-50%);
      mix-blend-mode: screen;
      opacity:0;
      transition: opacity 220ms var(--ease);
    }
    #cursor{
      background: rgba(255,255,255,.85);
      box-shadow:
        0 0 0 8px rgba(255,255,255,.06),
        0 0 22px rgba(255,255,255,.16);
      transition:
        width 160ms var(--ease),
        height 160ms var(--ease),
        opacity 220ms var(--ease),
        transform 60ms linear;
    }
    #cursor2{
      width:26px; height:26px;
      border:1px solid rgba(255,255,255,.20);
      background: rgba(255,255,255,.02);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      transition:
        width 220ms var(--ease),
        height 220ms var(--ease),
        opacity 220ms var(--ease),
        transform 90ms linear;
    }
    .cursorPress #cursor{ width:9px; height:9px; }
    .cursorPress #cursor2{ width:22px; height:22px; }
    .cursorHover #cursor2{ width:34px; height:34px; border-color: rgba(255,255,255,.28); }
    .cursorText #cursor2{ width:42px; height:42px; border-color: rgba(255,255,255,.25); }

    /* =========================================================
       BACKGROUND: main card gets depth, global dotted stars
       ========================================================= */
    .bg{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
      opacity:1;
    }
    .starsA, .starsB{
      position:absolute; inset:-220px;
      background-repeat:repeat;
      transform: translate3d(0,0,0);
      will-change: transform;
    }
    .starsA{
      background-size: 260px 260px;
      opacity:.55;
      animation: driftA 120s linear infinite;
      background-image:
        radial-gradient(1px 1px at 20px 26px, rgba(255,255,255,.65), transparent 50%),
        radial-gradient(1px 1px at 64px 142px, rgba(255,255,255,.55), transparent 50%),
        radial-gradient(1px 1px at 118px 80px, rgba(255,255,255,.60), transparent 50%),
        radial-gradient(1px 1px at 190px 210px, rgba(255,255,255,.58), transparent 50%),
        radial-gradient(1px 1px at 230px 50px, rgba(255,255,255,.70), transparent 50%);
    }
    .starsB{
      background-size: 420px 420px;
      opacity:.28;
      animation: driftB 200s linear infinite;
      background-image:
        radial-gradient(1px 1px at 62px 88px, rgba(255,255,255,.62), transparent 50%),
        radial-gradient(1px 1px at 170px 260px, rgba(255,255,255,.54), transparent 50%),
        radial-gradient(1px 1px at 320px 120px, rgba(255,255,255,.70), transparent 50%);
    }
    .glow{
      position:absolute; inset:0;
      background:
        radial-gradient(900px 700px at 20% 15%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(980px 760px at 84% 75%, rgba(255,255,255,.05), transparent 62%);
      opacity:.9;
      animation: breathe 8s ease-in-out infinite;
    }
    @keyframes driftA { to { transform: translate3d(-260px,-260px,0); } }
    @keyframes driftB { to { transform: translate3d(-420px,-420px,0); } }
    @keyframes breathe { 0%,100%{ opacity:.78 } 50%{ opacity:1 } }

    /* =========================================================
       SHELL / CARD
       ========================================================= */
    .shell{
      position:fixed; inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px;
    }
    .card{
      width: min(1020px, 100%);
      height: min(740px, 100%);
      border-radius: var(--r2);
      border: 1px solid var(--stroke);
      background: rgba(8,9,11,.78);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      transform: translateZ(0);
      animation: cardIn var(--super) both;
      position:relative;
    }
    @keyframes cardIn{
      from{ opacity:0; transform: translateY(10px) scale(.988); filter: blur(2px); }
      to  { opacity:1; transform: translateY(0) scale(1); filter: blur(0); }
    }

    /* Top subtle highlight inside card */
    .cardGlow{
      position:absolute; inset:-2px;
      pointer-events:none;
      opacity:.0;
      background: radial-gradient(1100px 260px at 50% -10%, rgba(255,255,255,.10), transparent 60%);
      transition: opacity var(--slow);
    }
    .card:focus-within .cardGlow{ opacity:.85; }

    /* =========================================================
       CONTROLS
       ========================================================= */
    .btn{
      height: var(--h);
      padding: 0 12px;
      border-radius: 12px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.04);
      color:var(--text);
      cursor:pointer;
      user-select:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      font-weight: 950;
      letter-spacing:.2px;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast), filter var(--fast);
      position:relative;
      overflow:hidden;
      outline:none;
    }
    .btn:hover{
      background: rgba(255,255,255,.06);
      transform: translateY(-1px);
      box-shadow: 0 14px 40px rgba(0,0,0,.38);
    }
    .btn:active{
      transform: translateY(0) scale(.985);
      filter: brightness(1.06);
    }
    .btn.primary{
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.18);
    }
    .btn.ghost{
      background: transparent;
      border-color: rgba(255,255,255,.10);
    }
    .btn.small{
      height: 30px;
      padding: 0 10px;
      border-radius: 11px;
      font-size: 12px;
    }
    .btn:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none !important;
      box-shadow:none !important;
    }
    .btn .ripple{
      position:absolute;
      width: 10px; height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.22);
      transform: translate(-50%,-50%);
      pointer-events:none;
      animation: ripple 520ms var(--ease) both;
    }
    @keyframes ripple{
      from{ opacity:.62; transform: translate(-50%,-50%) scale(1); }
      to{ opacity:0; transform: translate(-50%,-50%) scale(22); }
    }

    .field{
      height: var(--h);
      width:100%;
      padding: 0 12px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color:var(--text);
      outline:none;
      transition: border-color var(--fast), background var(--fast), transform var(--fast);
    }
    .field:focus{
      border-color: rgba(255,255,255,.22);
      background: rgba(255,255,255,.04);
      transform: translateY(-1px);
    }

    .ico{
      width: 18px;
      height: 18px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      opacity:.95;
      flex: 0 0 auto;
    }
    .ico svg{
      width:18px; height:18px;
      stroke: rgba(255,255,255,.88);
      fill:none;
      stroke-width:2;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

    .muted{ color:var(--muted); font-size:12px; }
    .tiny{ font-size:11px; }

    /* =========================================================
       APP LAYOUT
       ========================================================= */
    .layout{
      flex:1;
      min-height:0;
      display:flex;
    }
    .sidebar{
      width: 295px;
      min-width: 270px;
      max-width: 330px;
      border-right:1px solid var(--stroke);
      background: rgba(0,0,0,.14);
      padding: 10px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      min-height:0;
    }
    .main{
      flex:1;
      min-width:0;
      display:flex;
      flex-direction:column;
      min-height:0;
    }

    /* =========================================================
       ROWS / LIST
       ========================================================= */
    .row{
      height: 42px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 0 10px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.07);
      background: rgba(255,255,255,.02);
      cursor:pointer;
      user-select:none;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
      position:relative;
      overflow:hidden;
      outline:none;
    }
    .row:hover{
      background: rgba(255,255,255,.03);
      border-color: rgba(255,255,255,.10);
      transform: translateY(-1px);
      box-shadow: 0 14px 40px rgba(0,0,0,.38);
    }
    .row:active{
      transform: translateY(0) scale(.99);
    }
    .row::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(520px 150px at 20% 0%, rgba(255,255,255,.08), transparent 60%);
      opacity:0;
      transition: opacity var(--fast);
      pointer-events:none;
    }
    .row:hover::after{ opacity:1; }

    .rowLeft{ display:flex; align-items:center; gap:10px; min-width:0; }
    .nameCol{ min-width:0; display:flex; flex-direction:column; gap:2px; }
    .rowName{ font-weight: 950; font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .rowSub{ font-size:11px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    /* =========================================================
       STATUS DOTS (no random green dots anywhere else)
       ========================================================= */
    .statusDot{
      width:10px; height:10px;
      border-radius: 99px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.18);
      flex: 0 0 auto;
      position:relative;
      animation: dotIn 260ms var(--ease) both;
    }
    @keyframes dotIn{ from{ transform:scale(.7); opacity:0; } to{ transform:scale(1); opacity:1; } }
    .statusDot.online{ background: var(--online); box-shadow: 0 0 0 3px rgba(67,209,139,.12); }
    .statusDot.idle{ background: var(--idle); box-shadow: 0 0 0 3px rgba(255,209,102,.12); }
    .statusDot.dnd{ background: var(--dnd); box-shadow: 0 0 0 3px rgba(255,82,82,.12); }
    .statusDot.offline{ background: var(--offline); box-shadow: 0 0 0 3px rgba(107,122,144,.12); }

    /* =========================================================
       BADGES (Inbox counts: red curved square like Discord)
       ========================================================= */
    .badge{
      min-width: 20px;
      height: 18px;
      padding: 0 6px;
      border-radius: 7px;
      background: var(--danger);
      color:#0b0d10;
      font-weight: 950;
      font-size: 11px;
      display:none;
      align-items:center;
      justify-content:center;
      line-height:18px;
      box-shadow: 0 14px 38px rgba(0,0,0,.35);
      animation: pop 220ms var(--ease) both;
    }
    .badge.show{ display:flex; }
    @keyframes pop{ from{ transform:scale(.84); opacity:0; } to{ transform:scale(1); opacity:1; } }

    /* =========================================================
       SCROLL
       ========================================================= */
    .scroll{ overflow:auto; min-height:0; padding-right:2px; }
    .scroll::-webkit-scrollbar{ width: 10px; }
    .scroll::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.08);
      border-radius: 99px;
      border: 3px solid transparent;
      background-clip: content-box;
    }

    /* =========================================================
       PANELS
       ========================================================= */
    .panel{
      border:1px solid rgba(255,255,255,.07);
      border-radius: 16px;
      background: rgba(255,255,255,.02);
      overflow:hidden;
    }
    .panelHeader{
      height: 40px;
      padding: 0 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.12);
    }
    .panelTitle{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
      font-weight: 950;
      font-size: 12px;
      letter-spacing:.2px;
    }
    .panelBody{
      max-height: 140px;
      transition: max-height var(--slow), opacity var(--med);
      opacity:1;
    }
    .panelBody.collapsed{
      max-height: 0px;
      opacity:0;
      overflow:hidden;
    }

    /* =========================================================
       TOPBAR
       ========================================================= */
    .topbar{
      height: 56px;
      padding: 10px 12px;
      border-bottom:1px solid var(--stroke);
      background: rgba(0,0,0,.12);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      min-width:0;
    }
    .titleBlock{ min-width:0; display:flex; flex-direction:column; gap:2px; }
    .chatTitle{
      font-weight: 950;
      font-size: 12.5px;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      transition: transform var(--fast), opacity var(--fast);
    }
    .chatTitle.clickable{ cursor:pointer; }
    .chatTitle.clickable:hover{ transform: translateY(-1px); }
    .chatHint{ font-size:11px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .mePill{
      height: 38px;
      padding: 0 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      display:none;
      align-items:center;
      gap:10px;
      cursor:pointer;
      user-select:none;
      min-width: 0;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
    }
    .mePill:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.05);
      box-shadow: 0 14px 42px rgba(0,0,0,.38);
    }
    .meName{ font-weight: 950; font-size: 12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width: 200px; }
    .meSub{ font-size:11px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width: 200px; }

    /* =========================================================
       CHAT
       ========================================================= */
    .chatBox{
      flex:1;
      min-height:0;
      padding: 12px;
      overflow:auto;
      transition: opacity var(--med), transform var(--med), filter var(--med);
    }
    .chatBox.fading{
      opacity:0;
      transform: translateY(6px);
      filter: blur(1px);
    }

    .msg{ display:flex; margin-bottom: 10px; }
    .bubble{
      max-width: 72%;
      border:1px solid rgba(255,255,255,.07);
      background: rgba(255,255,255,.02);
      border-radius: 16px;
      padding: 10px 10px;
      box-shadow: 0 12px 34px rgba(0,0,0,.30);
      animation: msgIn 300ms var(--ease) both;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
    }
    @keyframes msgIn{
      from{ opacity:0; transform: translateY(8px); filter: blur(1px); }
      to{ opacity:1; transform: translateY(0); filter: blur(0); }
    }
    .bubble:hover{
      background: rgba(255,255,255,.03);
      border-color: rgba(255,255,255,.10);
      transform: translateY(-1px);
      box-shadow: 0 18px 46px rgba(0,0,0,.40);
    }
    .meta{ display:flex; align-items:center; justify-content:space-between; gap: 10px; margin-bottom: 6px; }
    .u{
      font-weight: 950;
      font-size: 12px;
      user-select:none;
      transition: transform var(--fast);
    }
    .u:hover{ transform: translateY(-1px); }
    .t{ font-size:11px; color:var(--muted); flex: 0 0 auto; }
    .body{ font-size:12px; color:var(--text); white-space: pre-wrap; word-break: break-word; }
    .mention{ color: var(--danger); font-weight: 950; }

    /* =========================================================
       COMPOSER
       ========================================================= */
    .composer{
      border-top:1px solid var(--stroke);
      background: rgba(0,0,0,.12);
      padding: 10px 12px 12px 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .composerRow{
      display:flex;
      align-items:stretch;
      gap: 10px;
    }
    .composerRow .field{ flex:1; }
    .composerRow .btn{ width: 118px; }

    .cooldown{
      display:none;
      align-items:center;
      gap:10px;
      color: var(--muted);
      font-size:11px;
      user-select:none;
    }
    .cooldown.warn{ color: var(--danger); }
    .bar{
      flex:1;
      height: 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      overflow:hidden;
    }
    .barFill{
      width:0%;
      height:100%;
      background: rgba(255,255,255,.18);
      transition: width 70ms linear;
    }
    .shake{ animation: shake 320ms ease; }
    @keyframes shake{
      0%,100%{ transform: translateX(0); }
      20%{ transform: translateX(-4px); }
      40%{ transform: translateX(4px); }
      60%{ transform: translateX(-3px); }
      80%{ transform: translateX(3px); }
    }

    /* =========================================================
       LOADING OVERLAY (screen transitions)
       ========================================================= */
    .loading{
      position:absolute; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.76);
      backdrop-filter: blur(10px);
      z-index: 60;
      opacity:0;
      transition: opacity var(--med);
    }
    .loading.show{ display:flex; opacity:1; }
    .loader{
      width:min(380px, 92vw);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      background: rgba(10,12,15,.94);
      box-shadow: var(--shadow2);
      padding: 16px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      animation: loaderIn 280ms var(--ease) both;
    }
    @keyframes loaderIn{
      from{ opacity:0; transform: translateY(12px) scale(.99); filter: blur(1px); }
      to{ opacity:1; transform: translateY(0) scale(1); filter: blur(0); }
    }
    .spinner{
      width: 18px; height: 18px;
      border-radius: 999px;
      border:2px solid rgba(255,255,255,.14);
      border-top-color: rgba(255,255,255,.70);
      animation: spin 650ms linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg);} }
    .dots{ display:inline-flex; gap:5px; margin-left:2px; }
    .dot{
      width:6px; height:6px; border-radius:99px;
      background: rgba(255,255,255,.55);
      animation: dot 900ms var(--ease) infinite;
      opacity:.5;
    }
    .dot:nth-child(2){ animation-delay: 120ms; }
    .dot:nth-child(3){ animation-delay: 240ms; }
    @keyframes dot{
      0%,100%{ transform: translateY(0); opacity:.45; }
      50%{ transform: translateY(-4px); opacity:.9; }
    }

    /* =========================================================
       MODAL (single close button)
       ========================================================= */
    .modalBack{
      position:fixed; inset:0;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(12px);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 70;
      padding: 18px;
      opacity: 0;
      transition: opacity var(--med);
    }
    .modalBack.show{ display:flex; opacity:1; }
    .modal{
      width:min(590px, 96vw);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      background: rgba(10,12,15,.94);
      box-shadow: var(--shadow2);
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      max-height: min(74vh, 620px);
      overflow:auto;
      animation: modalIn 260ms var(--ease) both;
    }
    @keyframes modalIn{
      from{ opacity:0; transform: translateY(14px) scale(.99); filter: blur(1px); }
      to{ opacity:1; transform: translateY(0) scale(1); filter: blur(0); }
    }
    .modalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      position:sticky;
      top:0;
      background: rgba(10,12,15,.94);
      padding-bottom: 8px;
      z-index: 2;
    }
    .modalTitle{
      font-weight: 950;
      font-size: 13px;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* =========================================================
       TOASTS
       ========================================================= */
    .toasts{
      position:absolute;
      right: 14px;
      bottom: 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      z-index: 80;
      pointer-events:none;
    }
    .toast{
      width: min(340px, 92vw);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(10,12,15,.94);
      box-shadow: var(--shadow2);
      padding: 10px 12px;
      display:flex;
      gap:10px;
      animation: toastIn 220ms var(--ease) both;
      transition: opacity var(--med), transform var(--med), filter var(--med);
    }
    @keyframes toastIn{
      from{ opacity:0; transform: translateY(10px); filter: blur(1px); }
      to{ opacity:1; transform: translateY(0); filter: blur(0); }
    }
    .toastDot{
      width:10px; height:10px;
      border-radius:99px;
      background: var(--ok);
      box-shadow: 0 0 0 3px rgba(67,209,139,.12);
      margin-top: 3px;
      flex:0 0 auto;
    }
    .toastTitle{ font-weight: 950; font-size:12px; }
    .toastMsg{ color:var(--muted); font-size:12px; }

    /* =========================================================
       BOTTOM BAR (fix footer positioning)
       Inside card, aligned, never overlaps content
       ========================================================= */
    .bottomBar{
      height: 42px;
      border-top: 1px solid var(--stroke);
      background: rgba(0,0,0,.12);
      padding: 0 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      color: rgba(255,255,255,.60);
      font-size: 11px;
      user-select:none;
    }
    .bottomBar a{
      color: rgba(255,255,255,.74);
      text-decoration:none;
      transition: opacity var(--fast), transform var(--fast);
    }
    .bottomBar a:hover{
      opacity:1;
      transform: translateY(-1px);
      text-decoration:underline;
    }

    /* =========================================================
       LOGIN OVERLAY: black with simple dot stars behind it
       No blur/see-through confusion. Clean and readable.
       ========================================================= */
    .loginOverlay{
      position:absolute; inset:0;
      z-index: 65;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(0,0,0,.92);
      opacity:1;
      transition: opacity var(--med), transform var(--med);
    }
    .loginOverlay.hidden{ opacity:0; pointer-events:none; }

    .loginStars{
      position:absolute; inset:0;
      pointer-events:none;
      overflow:hidden;
      opacity:.85;
    }
    .loginStars::before{
      content:"";
      position:absolute; inset:-200px;
      background-repeat:repeat;
      background-size: 280px 280px;
      opacity:.65;
      animation: driftA 150s linear infinite;
      background-image:
        radial-gradient(1px 1px at 30px 35px, rgba(255,255,255,.60), transparent 50%),
        radial-gradient(1px 1px at 86px 190px, rgba(255,255,255,.55), transparent 50%),
        radial-gradient(1px 1px at 152px 90px, rgba(255,255,255,.62), transparent 50%),
        radial-gradient(1px 1px at 220px 240px, rgba(255,255,255,.58), transparent 50%),
        radial-gradient(1px 1px at 250px 40px, rgba(255,255,255,.70), transparent 50%);
    }
    .loginStars::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 700px at 25% 20%, rgba(255,255,255,.06), transparent 60%),
        radial-gradient(900px 700px at 80% 75%, rgba(255,255,255,.05), transparent 60%);
      animation: breathe 8s ease-in-out infinite;
    }

    .loginCard{
      width:min(420px, 92vw);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      background: rgba(10,12,15,.92);
      box-shadow: var(--shadow2);
      padding: 16px;
      display:flex;
      flex-direction:column;
      gap: 12px;
      position:relative;
      animation: loginIn 520ms var(--ease) both;
    }
    @keyframes loginIn{
      from{ opacity:0; transform: translateY(12px) scale(.988); filter: blur(2px); }
      to{ opacity:1; transform: translateY(0) scale(1); filter: blur(0); }
    }

    .brandRow{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .brand{
      font-weight: 950;
      letter-spacing: .2px;
      font-size: 15px;
    }

    /* Password field cluster: fixes show button positioning */
    .inputWrap{ position:relative; }
    .field.hasIcon{ padding-right: 56px; }
    .eye{
      position:absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      height: 30px;
      width: 44px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
      transition: background var(--fast), transform var(--fast), border-color var(--fast);
    }
    .eye:hover{ background: rgba(255,255,255,.05); transform: translateY(-50%) translateY(-1px); }

    .btnRow{
      display:flex;
      gap:10px;
      align-items:center;
    }
    .btnRow .btn{ flex:1; }

    /* Reduced-motion accessibility */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
      body{ cursor:auto; }
      #cursor,#cursor2{ display:none; }
    }
  </style>
</head>

<body>
  <!-- Custom Cursor Elements -->
  <div id="cursor"></div>
  <div id="cursor2"></div>

  <!-- Global background -->
  <div class="bg" aria-hidden="true">
    <div class="starsA"></div>
    <div class="starsB"></div>
    <div class="glow"></div>
  </div>

  <div class="shell">
    <div class="card" id="card">
      <div class="cardGlow"></div>

      <!-- Loading Overlay -->
      <div class="loading" id="loading">
        <div class="loader">
          <div style="display:flex;align-items:center;gap:10px">
            <div class="spinner"></div>
            <div style="font-weight:950;letter-spacing:.2px">Loading</div>
            <div class="dots" aria-hidden="true">
              <div class="dot"></div><div class="dot"></div><div class="dot"></div>
            </div>
          </div>
          <div class="muted" id="loaderSub">syncing…</div>
        </div>
      </div>

      <!-- Login Overlay -->
      <div class="loginOverlay" id="loginOverlay">
        <div class="loginStars" aria-hidden="true"></div>

        <div class="loginCard" id="loginCard">
          <div class="brandRow">
            <div class="brand">tonkotsu.online</div>
            <div class="muted tiny">compact • black</div>
          </div>

          <div>
            <div class="muted" style="margin-bottom:6px">Username (letters/numbers only, min 4)</div>
            <input class="field" id="username" placeholder="yourname" autocomplete="username"/>
          </div>

          <div>
            <div class="muted" style="margin-bottom:6px">Password (letters/numbers only, min 4)</div>
            <div class="inputWrap">
              <input class="field hasIcon" id="password" type="password" placeholder="••••" autocomplete="current-password"/>
              <div class="eye" id="togglePass" title="Show/Hide">
                <span class="ico" aria-hidden="true">
                  <svg viewBox="0 0 24 24">
                    <path d="M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12Z"/>
                    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                  </svg>
                </span>
              </div>
            </div>
          </div>

          <div class="btnRow">
            <button class="btn primary" id="joinBtn">Log in / Create</button>
            <button class="btn" id="guestBtn">Guest</button>
          </div>

          <div class="muted tiny" style="line-height:1.45">
            Username/password allow only letters and numbers. Guests are limited (no DMs, no groups).
          </div>
        </div>
      </div>

      <!-- App Layout -->
      <div class="layout" id="app">
        <!-- Sidebar -->
        <div class="sidebar">
          <!-- Inbox -->
          <div class="row" id="inboxBtn" title="Inbox (mentions, invites, friend requests)">
            <div class="rowLeft">
              <span class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M4 4h16v12H4z"/><path d="M4 13h4l2 3h4l2-3h4"/></svg>
              </span>
              <div class="nameCol">
                <div class="rowName">Inbox</div>
                <div class="rowSub">mentions • invites • requests</div>
              </div>
            </div>
            <div class="badge" id="inboxPing">0</div>
          </div>

          <!-- Online panel (compact) -->
          <div class="panel">
            <div class="panelHeader">
              <div class="panelTitle">
                <span class="ico" aria-hidden="true">
                  <svg viewBox="0 0 24 24"><path d="M20 7c-3 3-13 3-16 0"/><path d="M4 7v10"/><path d="M20 7v10"/><path d="M7 17h10"/></svg>
                </span>
                <span style="min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">Online</span>
              </div>
              <div style="display:flex;align-items:center;gap:10px">
                <span class="muted tiny" id="onlineCount">0</span>
                <button class="btn small ghost" id="onlineToggle" title="Collapse/Expand">
                  <span class="ico" aria-hidden="true">
                    <svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
                  </span>
                </button>
              </div>
            </div>
            <div class="panelBody scroll" id="onlineWrap">
              <div style="display:flex;flex-direction:column;gap:10px;padding:10px" id="onlineList"></div>
            </div>
          </div>

          <!-- Messages -->
          <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;padding:2px 2px 0 2px;font-weight:950;letter-spacing:.2px">
            <div style="display:flex;align-items:center;gap:10px">
              <span class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"/></svg>
              </span>
              <span>Messages</span>
            </div>
            <div style="display:flex;align-items:center;gap:10px">
              <div class="badge" id="msgPing">0</div>
              <button class="btn small primary" id="createGroupBtn" title="Create group">
                <span class="ico" aria-hidden="true">
                  <svg viewBox="0 0 24 24"><path d="M12 5v14"/><path d="M5 12h14"/></svg>
                </span>
                <span>Create</span>
              </button>
            </div>
          </div>

          <div class="scroll" style="padding:10px;flex:1;min-height:0">
            <div style="display:flex;flex-direction:column;gap:10px" id="msgList"></div>
          </div>
        </div>

        <!-- Main -->
        <div class="main">
          <div class="topbar">
            <div class="titleBlock" style="flex:1;min-width:0">
              <div class="chatTitle" id="chatTitle">Global chat</div>
              <div class="chatHint" id="chatHint">shared with everyone</div>
            </div>

            <div class="mePill" id="mePill" title="Account menu">
              <div class="statusDot online" id="meStatusDot"></div>
              <div style="min-width:0">
                <div class="meName" id="meName">You</div>
                <div class="meSub" id="meSub">menu</div>
              </div>
              <span class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"/></svg>
              </span>
            </div>
          </div>

          <div class="chatBox" id="chatBox"></div>

          <div class="composer">
            <div class="cooldown" id="cooldownRow">
              <div id="cooldownText">0.0s</div>
              <div class="bar"><div class="barFill" id="cdFill"></div></div>
            </div>

            <div class="composerRow">
              <input class="field" id="message" placeholder="Type a message…"/>
              <button class="btn primary" id="sendBtn">
                <span class="ico" aria-hidden="true">
                  <svg viewBox="0 0 24 24"><path d="M22 2 11 13"/><path d="M22 2 15 22l-4-9-9-4z"/></svg>
                </span>
                <span>Send</span>
              </button>
            </div>

            <div class="muted tiny" style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap">
              <div id="cooldownLabel">Cooldown: 3s</div>
              <div id="statusLabel">Status: Online</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Toasts (inside card) -->
      <div class="toasts" id="toasts"></div>

      <!-- Bottom bar (fixes Ko-fi + rights positioning) -->
      <div class="bottomBar">
        <div style="display:flex;align-items:center;gap:10px;min-width:0">
          <a href="https://ko-fi.com/fishy_x1" target="_blank" rel="noreferrer">Support on Ko-fi</a>
          <span style="opacity:.55">•</span>
          <span style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">tonkotsu.online</span>
        </div>
        <div style="white-space:nowrap">© <span id="year"></span> All rights reserved</div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modalBack" id="modalBack">
    <div class="modal">
      <div class="modalTop">
        <div class="modalTitle" id="modalTitle">Modal</div>
        <button class="btn small" id="modalClose" title="Close">
          <span class="ico" aria-hidden="true">
            <svg viewBox="0 0 24 24"><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg>
          </span>
          <span>Close</span>
        </button>
      </div>
      <div id="modalBody"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/script.js"></script>
</body>
</html>
