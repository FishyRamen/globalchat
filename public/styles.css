:root{
  --bg0:#07090f;
  --bg1:#0b0f18;
  --card:#0f1523cc;
  --cardSolid:#0f1523;
  --stroke:#1c263a;
  --text:#e8edf7;
  --muted:#a9b3c7;
  --accent:#8ea2ff;
  --accent2:#63e6be;
  --danger:#ff6b6b;

  --radius:16px;
  --shadow: 0 12px 48px rgba(0,0,0,.45);
  --appW: 1080px; /* compact app max width */
}

/* Background */
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  background: radial-gradient(1200px 800px at 30% 15%, #172042 0%, transparent 65%),
              radial-gradient(900px 700px at 70% 35%, #0f3a2f 0%, transparent 60%),
              linear-gradient(180deg, var(--bg0), var(--bg1));
  color:var(--text);
  height:100vh;
  overflow:hidden;
}

#bg{
  position:fixed; inset:0;
  background:
    radial-gradient(900px 700px at 15% 80%, rgba(142,162,255,.12), transparent 60%),
    radial-gradient(900px 700px at 85% 20%, rgba(99,230,190,.10), transparent 55%);
  filter: blur(0px);
  pointer-events:none;
}

/* Centered app shell (compact, shows background around it) */
.app-shell{
  width:min(var(--appW), calc(100vw - 44px));
  height:min(760px, calc(100vh - 44px));
  margin:22px auto;
  border-radius: 22px;
  background: rgba(8,10,16,.55);
  border:1px solid rgba(255,255,255,.06);
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* Top bar */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 14px;
  border-bottom:1px solid rgba(255,255,255,.06);
}
.brand{
  display:flex; align-items:center; gap:10px;
}
.brandDot{
  width:10px;height:10px;border-radius:99px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 0 18px rgba(142,162,255,.35);
}
.brandName{ font-weight:700; letter-spacing:.3px; }
.brandSub{ color:var(--muted); font-size:12px; margin-top:2px; }
.brandText{ line-height:1.05; }

.topActions{ display:flex; align-items:center; gap:10px; }

.iconBtn{
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:38px; height:38px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(15,21,35,.55);
  color:var(--text);
  cursor:pointer;
  transition: transform .12s ease, background .12s ease;
}
.iconBtn:hover{ transform: translateY(-1px); background: rgba(15,21,35,.75); }
.iconBtn:active{ transform: translateY(0px) scale(.98); }

.badge{
  position:absolute;
  top: -6px; right:-6px;
  min-width:18px;height:18px;
  padding:0 5px;
  border-radius:999px;
  background: var(--danger);
  color:white;
  font-size:11px;
  display:flex; align-items:center; justify-content:center;
  border:2px solid rgba(8,10,16,.8);
}

/* Small icons */
.iconBell, .iconGear, .iconX{
  width:18px; height:18px; display:block;
  background: currentColor;
  -webkit-mask-size: contain; mask-size: contain;
  -webkit-mask-repeat: no-repeat; mask-repeat:no-repeat;
  -webkit-mask-position:center; mask-position:center;
  opacity:.92;
}
.iconBell{
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 22a2.5 2.5 0 0 0 2.45-2h-4.9A2.5 2.5 0 0 0 12 22Zm7-6V11a7 7 0 1 0-14 0v5l-2 2v1h18v-1l-2-2Z'/%3E%3C/svg%3E");
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 22a2.5 2.5 0 0 0 2.45-2h-4.9A2.5 2.5 0 0 0 12 22Zm7-6V11a7 7 0 1 0-14 0v5l-2 2v1h18v-1l-2-2Z'/%3E%3C/svg%3E");
}
.iconGear{
  -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.2 7.2 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 13.9 1h-3.8a.5.5 0 0 0-.49.42l-.36 2.54c-.58.23-1.12.54-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.71 7.48a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32c.13.22.39.3.6.22l2.39-.96c.5.4 1.05.71 1.63.94l.36 2.54c.04.24.25.42.49.42h3.8c.24 0 .45-.18.49-.42l.36-2.54c.58-.23 1.12-.54 1.63-.94l2.39.96c.22.09.47 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58ZM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5Z'/%3E%3C/svg%3E");
  mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.2 7.2 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 13.9 1h-3.8a.5.5 0 0 0-.49.42l-.36 2.54c-.58.23-1.12.54-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.71 7.48a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32c.13.22.39.3.6.22l2.39-.96c.5.4 1.05.71 1.63.94l.36 2.54c.04.24.25.42.49.42h3.8c.24 0 .45-.18.49-.42l.36-2.54c.58-.23 1.12-.54 1.63-.94l2.39.96c.22.09.47 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58ZM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5Z'/%3E%3C/svg%3E");
}
.iconX{
  -webkit-mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.29 9.17 12 2.88 5.71 4.29 4.29l6.3 6.3 6.3-6.3z'/%3E%3C/svg%3E");
  mask-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.29 9.17 12 2.88 5.71 4.29 4.29l6.3 6.3 6.3-6.3z'/%3E%3C/svg%3E");
}

/* Layout */
.layout{
  display:grid;
  grid-template-columns: 280px 1fr;
  gap:12px;
  padding:12px;
  min-height:0;
  flex:1;
}
.sidebar{
  display:flex;
  flex-direction:column;
  gap:12px;
  min-height:0;
}
.content{
  min-height:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:6px;
}

.panel{
  background: rgba(15,21,35,.55);
  border:1px solid rgba(255,255,255,.07);
  border-radius: var(--radius);
  padding:10px;
  min-height:0;
}
.panelTitle{
  font-size:12px;
  color:var(--muted);
  margin-bottom:8px;
  letter-spacing:.2px;
}

.tabs{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.tabBtn{
  text-align:left;
  padding:10px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(12,16,26,.40);
  color:var(--text);
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  align-items:center;
  transition: background .12s ease, transform .12s ease;
}
.tabBtn:hover{ background: rgba(12,16,26,.62); transform: translateY(-1px); }
.tabBtn.active{ outline: 2px solid rgba(142,162,255,.35); background: rgba(12,16,26,.75); }

.pill{
  font-size:11px;
  padding:2px 8px;
  border-radius:999px;
  background: rgba(255,255,255,.08);
  color: var(--muted);
}

.list{
  overflow:auto;
  max-height: 280px;
  padding-right: 4px;
}
.userRow{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  padding:8px 10px;
  border-radius:12px;
  cursor:pointer;
  border:1px solid transparent;
}
.userRow:hover{
  background: rgba(255,255,255,.04);
  border-color: rgba(255,255,255,.06);
}
.userName{ font-size:13px; }
.userTag{ font-size:11px; color:var(--muted); }

.sideFooter{
  margin-top:auto;
  padding:10px 4px 2px;
  text-align:center;
  color:var(--muted);
  font-size:11px;
}
.kofi{
  display:inline-block;
  color: var(--text);
  text-decoration:none;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.08);
  background: rgba(15,21,35,.45);
}
.kofi:hover{ background: rgba(15,21,35,.70); }
.copyright{ margin-top:8px; opacity:.85; }

/* Cards */
.card{
  width: min(640px, 100%);
  background: rgba(15,21,35,.60);
  border:1px solid rgba(255,255,255,.07);
  border-radius: 18px;
  box-shadow: 0 10px 44px rgba(0,0,0,.35);
  backdrop-filter: blur(10px);
  overflow:hidden;
}

/* Login hover popup animation */
.loginCard{
  padding:18px;
  transform: translateY(0px);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.loginCard:hover{
  transform: translateY(-3px);
  background: rgba(15,21,35,.70);
  box-shadow: 0 14px 60px rgba(0,0,0,.45);
}

.cardTitle{ font-size:20px; font-weight:700; }
.cardSub{ margin-top:6px; color:var(--muted); font-size:13px; }

.formRow{ margin-top:12px; display:flex; gap:10px; }
.twoCol{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }

.input{
  width:100%;
  padding:11px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(8,10,16,.45);
  color: var(--text);
  outline:none;
}
.input:focus{ border-color: rgba(142,162,255,.45); }

.passwordRow{ position:relative; }
.eyeBtn{
  position:absolute;
  right:10px; top:50%;
  transform: translateY(-50%);
  width:34px; height:34px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.06);
  cursor:pointer;
}
.eyeBtn svg{ fill: rgba(232,237,247,.88); }
.eyeBtn:hover{ background: rgba(255,255,255,.10); }

.btn{
  padding:11px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.06);
  color: var(--text);
  cursor:pointer;
  transition: transform .12s ease, background .12s ease;
}
.btn:hover{ background: rgba(255,255,255,.10); transform: translateY(-1px); }
.btn:active{ transform: translateY(0px) scale(.99); }
.btn.primary{
  border-color: rgba(142,162,255,.35);
  background: rgba(142,162,255,.14);
}
.hint{ margin-top:10px; color: var(--muted); font-size:12px; min-height:16px; }

/* Chat */
.chatCard{
  display:flex;
  flex-direction:column;
  height: 100%;
  max-height: 620px; /* keeps it compact */
}
.chatHeader{
  padding:12px 14px;
  border-bottom:1px solid rgba(255,255,255,.06);
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:center;
}
.chatTitle{ font-size:16px; font-weight:700; }
.chatSubtitle{ font-size:12px; color:var(--muted); margin-top:2px; }

.messages{
  padding:12px 14px;
  overflow:auto;
  min-height:0;
  flex:1;
}
.msg{
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.06);
  background: rgba(8,10,16,.30);
  margin-bottom:10px;
}
.msgTop{
  display:flex;
  justify-content:space-between;
  gap:10px;
  margin-bottom:6px;
}
.msgUser{ font-weight:650; font-size:13px; }
.msgTime{ color:var(--muted); font-size:11px; }
.msgText{ font-size:13px; color: rgba(232,237,247,.92); white-space:pre-wrap; word-break:break-word; }

.composer{
  padding:12px 14px;
  border-top:1px solid rgba(255,255,255,.06);
  display:flex;
  gap:10px;
}

/* XP */
.xpWrap{ min-width: 220px; }
.xpTop{ display:flex; justify-content:space-between; font-size:11px; color:var(--muted); margin-bottom:6px; }
.xpBar{
  height:10px;
  border-radius:999px;
  background: rgba(255,255,255,.08);
  overflow:hidden;
}
.xpFill{
  height:100%;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(142,162,255,.85), rgba(99,230,190,.85));
  width:0%;
  transition: width .35s ease;
}

/* Modals */
.modalOverlay{
  position:fixed; inset:0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(6px);
  z-index:50;
}
.modal{
  position:fixed;
  left:50%; top:50%;
  transform: translate(-50%,-50%);
  width:min(620px, calc(100vw - 44px));
  max-height:min(680px, calc(100vh - 44px));
  background: rgba(15,21,35,.88);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  box-shadow: 0 18px 70px rgba(0,0,0,.55);
  z-index:51;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}
.modalHeader{
  padding:12px 14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.modalTitle{ font-weight:700; }
.modalBody{
  padding:12px 14px;
  overflow:auto;
  min-height:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* Settings rows (prevents overlap) */
.settingRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.07);
  background: rgba(8,10,16,.30);
  flex-wrap:wrap; /* critical: no overlap */
}
.settingText{ min-width: 220px; flex:1; }
.settingName{ font-weight:650; font-size:13px; }
.settingDesc{ color:var(--muted); font-size:12px; margin-top:2px; }
.select{
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(8,10,16,.45);
  color: var(--text);
}

/* Smooth slider */
.range{
  width: 220px;
  accent-color: var(--accent);
  cursor:pointer;
}
.range{ transition: filter .12s ease; }
.range:active{ filter: brightness(1.1); }

/* Switch */
.switch{ position:relative; width:48px; height:28px; }
.switch input{ display:none; }
.switch .slider{
  position:absolute; inset:0;
  border-radius:999px;
  background: rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.12);
  transition: background .18s ease;
}
.switch .slider:before{
  content:"";
  position:absolute;
  width:22px; height:22px;
  border-radius:999px;
  top:2px; left:2px;
  background: rgba(232,237,247,.92);
  transition: transform .18s ease;
}
.switch input:checked + .slider{
  background: rgba(142,162,255,.22);
  border-color: rgba(142,162,255,.35);
}
.switch input:checked + .slider:before{
  transform: translateX(20px);
}

/* Toasts */
.toastHost{
  position:fixed;
  right: 18px;
  bottom: 18px;
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:60;
}
.toast{
  width:min(320px, calc(100vw - 44px));
  background: rgba(15,21,35,.92);
  border:1px solid rgba(255,255,255,.10);
  border-radius:16px;
  box-shadow: 0 16px 70px rgba(0,0,0,.55);
  padding:12px 12px;
  animation: toastIn .18s ease;
}
@keyframes toastIn{
  from{ transform: translateY(10px); opacity:0; }
  to{ transform: translateY(0px); opacity:1; }
}
.toastTitle{ font-weight:700; }
.toastSub{ color:var(--muted); font-size:12px; margin-top:2px; }

/* Cursor + trail */
.cursor-trail{
  position:fixed;
  left:0; top:0;
  pointer-events:none;
  z-index:100;
}
.cursorDot{
  position:absolute;
  width:8px; height:8px;
  border-radius:99px;
  background: linear-gradient(135deg, rgba(142,162,255,.95), rgba(99,230,190,.95));
  box-shadow: 0 0 18px rgba(142,162,255,.35);
  transform: translate(-50%,-50%);
}

/* Responsive */
@media (max-width: 920px){
  .layout{ grid-template-columns: 1fr; }
  .sidebar{ flex-direction:row; }
  .panel{ flex:1; }
  .list{ max-height: 180px; }
  .content{ padding:0; }
  .chatCard{ max-height: 520px; }
}

